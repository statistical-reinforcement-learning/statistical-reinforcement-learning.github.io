---
exercise: 3
---

<h1>Chapter 1 â€¢ Exercise 3</h1>
<h3>Part 1</h3>
We directly have
\begin{align}
    \ln \mathbb{E} \exp \{- \eta (X - \mathbb{E}[X])\} &\leq \mathbb{E} \exp \{- \eta (X - \mathbb{E}[X])\} - 1 \\
    &\leq \mathbb{E} \left\{1 - \eta (X - \mathbb{E}[X]) + \frac{\eta^2}{2} (X - \mathbb{E}[X])^2  \right\} - 1 \\
    &= \frac{\eta^2}{2}\left(\mathbb{E}[X^2] - \mathbb{E}[X]^2\right) \\
    &\leq \frac{\eta^2}{2}\mathbb{E}[X^2]
\end{align}
as desired.

<h3>Part 2</h3>
Rearranging gives us
\begin{align}
    \eta \mathbb{E}[X] \leq - \ln \mathbb{E} \exp\{- \eta X\} + \frac{\eta^2}{2} \mathbb{E}[X^2]
\end{align}
Hence
\begin{align}
    \eta \mathbb{E}_{\hat{f}^t \sim q^{t} }[l(\hat{f}^t(x), y)] &\leq - \ln \mathbb{E}_{\hat{f}^t \sim q^{t} } \exp\{- \eta l(\hat{f}^t(x), y)\} + \frac{\eta^2}{2} \mathbb{E}_{\hat{f}^t \sim q^{t} }[l(\hat{f}^t(x), y)^2] \\
    &= - \ln \sum_{f \in \mathcal{F}} e^{- \eta l(f(x), y)} \frac{e^{- \sum_{i=1}^{t-1} l(f(x), y)}}{\sum_{f' \in \mathcal{F}} e^{- \sum_{i=1}^{t-1} l(f(x), y)}} + \frac{\eta^2}{2} \mathbb{E}_{\hat{f}^t \sim q^{t} }[l(\hat{f}^t(x), y)^2] \\
    &= \Phi_{\eta}^{t} - \Phi_{\eta}^{t-1} + \frac{\eta^2}{2} \mathbb{E}_{f \sim q^{t} }[l(f(x), y)^2]
\end{align}

Summing over \(t\), we have
\begin{align}
    \sum_{t=1}^{T} \mathbb{E}_{\hat{f}^t \sim q^{t} }[l(\hat{f}^t(x), y)] &\leq \frac{1}{\eta} \left(\Phi_{\eta}^{T} - \Phi_{\eta}^{0}\right) + \frac{\eta}{2} \sum_{t=1}^{T} \mathbb{E}_{\hat{f}^t \sim q^{t} }[l(\hat{f}^t(x), y)^2]
\end{align}

Finally we have both
\begin{align}
    \Phi_{\eta}^0 &= - \ln |\mathcal{F}| \\
    \Phi_{\eta}^T &\leq \eta \sum_{t=1}^{T} l(f^{\star}(x), y) \quad \forall \ f^{\star} \in \mathcal{F}
\end{align}

Hence for any \(f^{\star} \in \mathcal{F}\), we have
\begin{align}
    \sum_{t=1}^{T} \mathbb{E}_{\hat{f}^t \sim q^{t} }[l(\hat{f}^t(x), y)] - l(f^{\star}(x), y) \leq  \frac{\eta}{2} \sum_{t=1}^{T} \mathbb{E}_{\hat{f}^t \sim q^{t} }[l(\hat{f}^t(x), y)^2] + \frac{\log |\mathcal{F}|}{\eta}
\end{align}
as desired.